# Workflow to process species occurrences


## Set Up
```{r}
source("setup.R")
```


## Explore and Clean Survey Data

Read in raw tables from Access database (PC version)
```{r}
# NOTE: THIS ONLY WORKS AS IS ON A PC
# data stored as an Access database
library(RODBC)

# read in Access object
survey_db <- odbcConnectAccess2007("data/nature_in_the_city/nic_bird_butterfly_surveys_2018.mdb")

# get a list of all tables
sqlTables(survey_db)


# read in necessary files
bird_obs <- sqlFetch(survey_db, "bird_observations") %>% as_tibble()

butterfly_obs <- sqlFetch(survey_db, "butterfly_observations")

sites <- sqlFetch(survey_db, "sites")


```

Explore #s
```{r}
# explore sample sizes
distinct(bird_obs, species)

bird_obs %>% 
  group_by(species) %>% 
  distinct(site_ID) %>% 
  count()



# map out sites
sites %>% 
  st_as_sf(coords = c("longitude", "latitude"), crs = 4326) %>% 
  mapview()
```


Combine Datasets
```{r}

```

